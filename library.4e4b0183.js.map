{"mappings":"oeAAAA,EAAA,S,uBCEA,EAFAA,EAAA,SAEAC,0B,WCFA,IAAAC,EAAAF,EAAA,S,qCAKA,MAAMG,EAAO,CACXC,WAAYC,SAASC,cAAc,oBACnCC,UAAWF,SAASC,cAAc,gBAClCE,SAAU,GACVC,YAAa,CAAC,GA6FhB,SAASC,IACPP,EAAKI,UAAUI,UAAUC,IAAI,aAC7BT,EAAKI,UAAUM,UAAY,EAC7B,CA7FAV,EAAKC,WAAWU,iBAAiB,SAEjCC,eAA+BC,GAC7B,GAAIA,EAAMC,OAAON,UAAUO,SAAS,oBAClC,OAEF,MACMC,EADcH,EAAMC,OAAOG,QAAQ,aACdC,QAAQC,GAEnC,IAAIC,EAAkB,KAClBpB,EAAKK,SAASgB,OAAS,GACPrB,EAAKK,SAASiB,MAAKC,GAAQA,EAAKJ,IAAMH,KAG1D,EAAAQ,EAAAC,eAAcD,EAAAE,QAEd,MACMpB,SAD4B,EAAAP,EAAA4B,sBAAqBX,IACfY,KAExC5B,EAAKM,YAAcA,EACnBN,EAAKK,SAASwB,KAAKvB,GACnBN,EAAKI,UAAUI,UAAUsB,OAAO,aA2DlC,SAAyBF,GACvB,MAAMG,EAzDR,SAA+BH,GAC7B,MAAMI,MACJA,EAAKC,aACLA,EAAYC,WACZA,EAAUC,WACVA,EAAUC,eACVA,EAAcC,SACdA,EAAQC,YACRA,EAAWC,OACXA,GACEX,EACEY,EAAaF,EACf,kCAAkCA,IAClC,8GACEG,EAAaF,EAAOG,KAAIC,GAAWA,EAAQC,OAAMC,KAAK,KAE5D,MAAO,6JAG6BL,mHAGFR,kQAKsCC,4FAEzBC,sMAKHC,+MAI2BC,2KAI3BK,qMAKEJ,qFAOhD,CAG0BS,CAAsBlB,GAC9C5B,EAAKI,UAAU2C,mBAAmB,YAAahB,IAC/C,EAAAP,EAAAC,eAAcD,EAAAE,QACGxB,SAASC,cAAc,iBAC/BQ,iBAAiB,QAASJ,GACnCyC,OAAOrC,iBAAiB,UAAWJ,GACnCyC,OAAOrC,iBAAiB,QAASJ,EACnC,CAnEgD0C,CAAgBjD,EAAKM,YACrE","sources":["src/library.js","src/js/indexLibrary.js","src/js/modalMovieLibrary.js"],"sourcesContent":["import './js/pagination';\nimport './js/variables';\nimport './js/modalTeam';\nimport './js/indexLibrary';\nimport './js/localStorage';\nimport './js/modalMovieLibrary';\n","import { renderfromLocalStorage } from './localStorage';\n\nrenderfromLocalStorage();\n","import { fetchFilmDetailsById } from './fetchDetails';\nimport axios from 'axios';\nimport { loader, displayLoader } from './displayLoader';\nimport { addToWatched, addToQueue } from './localStorage';\n\nconst refs = {\n  galleryBox: document.querySelector('.movies__library'),\n  filmModal: document.querySelector('[data-modal]'),\n  searchId: [],\n  filmDetails: {},\n};\n\nrefs.galleryBox.addEventListener('click', galleryBoxClick);\n\nasync function galleryBoxClick(event) {\n  if (event.target.classList.contains('.movies__library')) {\n    return;\n  }\n  const galleryItem = event.target.closest('[data-id]');\n  const filmId = galleryItem.dataset.id;\n\n  let searchIdDetails = null;\n  if (refs.searchId.length > 0) {\n    searchIdDetails = refs.searchId.find(film => film.id == filmId);\n  }\n\n  displayLoader(loader);\n\n  const filmDetailsResponse = await fetchFilmDetailsById(filmId);\n  const filmDetails = filmDetailsResponse.data;\n\n  refs.filmDetails = filmDetails;\n  refs.searchId.push(filmDetails);\n  refs.filmModal.classList.remove('is-hidden'), renderFilmModal(refs.filmDetails);\n}\n\nfunction createFilmModalMarkup(data) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    poster_path,\n    genres,\n  } = data;\n  const posterPath = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : 'https://www.cloudways.com/blog/wp-content/uploads/How-to-Create-Custom-Codeigniter-404-Not-Found-Page-1.jpg';\n  const genreNames = genres.map(element => element.name).join(' ');\n\n  return `\n    <div class=\"film-modal\">\n      <button class=\"button-close\" type=\"button\" button-modal-close>&#10006</button>\n      <img class=\"film__image\" src=\"${posterPath}\" alt=\"Film Image\" />\n      <article>\n        <div class=\"film__content\">\n          <h2 class=\"film__title\">${title}</h2>\n          <ul class=\"film-info\">\n            <li class=\"film-info__item\">\n              <p class=\"film-info__label\">Vote / Votes</p>\n              <div class=\"film-vote\">\n                <span class=\"film-vote__label film-vote__label--orange\">${vote_average}</span>\n                <span>/</span>\n                <span class=\"film-vote__label\">${vote_count}</span>\n              </div>\n            </li>\n            <li class=\"film-info__item\">\n              <p class=\"film-info__label\">Popularity</p>\n              <span class=\"film-info__text\">${popularity}</span>\n            </li>\n            <li class=\"film-info__item\">\n              <p class=\"film-info__label\">Original Title</p>\n              <span class=\"film-info__text film-info__text--uppercase\">${original_title}</span>\n            </li>\n            <li class=\"film-info__item\">\n              <p class=\"film-info__label\">Genre</p>\n              <span class=\"film-info__text\">${genreNames}</span>\n            </li>\n          </ul>\n          <div class=\"film-description\">\n            <h3 class=\"film-description__title\">About</h3>\n            <p class=\"film-description__text\">${overview}</p>\n          </div>\n        </div>\n        \n      </article>\n    </div>\n  `;\n}\n\nfunction renderFilmModal(data) {\n  const fiimModalMarkup = createFilmModalMarkup(data);\n  refs.filmModal.insertAdjacentHTML('beforeend', fiimModalMarkup);\n  displayLoader(loader);\n  const closeBtn = document.querySelector('.button-close');\n  closeBtn.addEventListener('click', closeModal);\n  window.addEventListener('keydown', closeModal);\n  window.addEventListener('click', closeModal);\n}\n\nfunction closeModal() {\n  refs.filmModal.classList.add('is-hidden');\n  refs.filmModal.innerHTML = '';\n}\n\nasync function fetchFilmDetailsByIdCurrent(filmId) {\n  const response = await axios.get(`API_URL/films/${filmId}`);\n  return response.data;\n}\n\nexport async function addToWatchedHandler() {\n  const film = {\n    id: refs.filmDetails.id,\n    title: refs.filmDetails.title,\n    posterPath: refs.filmDetails.poster_path,\n    releaseYear: refs.filmDetails.release_date,\n    genreNames: refs.filmDetails.genres,\n  };\n\n  addToWatched(film);\n}\n\nasync function addToQueueHandler() {\n  const film = {\n    id: refs.filmDetails.id,\n    title: refs.filmDetails.title,\n    posterPath: refs.filmDetails.poster_path,\n    releaseYear: refs.filmDetails.release_date,\n    genreNames: refs.filmDetails.genres,\n  };\n\n  addToQueue(film);\n}\n"],"names":["parcelRequire","renderfromLocalStorage","$5y5ap","$380d6cc09a443420$var$refs","galleryBox","document","querySelector","filmModal","searchId","filmDetails","$380d6cc09a443420$var$closeModal","classList","add","innerHTML","addEventListener","async","event","target","contains","filmId","closest","dataset","id","searchIdDetails","length","find","film","$c8RuX","displayLoader","loader","fetchFilmDetailsById","data","push","remove","fiimModalMarkup","title","vote_average","vote_count","popularity","original_title","overview","poster_path","genres","posterPath","genreNames","map","element","name","join","$380d6cc09a443420$var$createFilmModalMarkup","insertAdjacentHTML","window","$380d6cc09a443420$var$renderFilmModal"],"version":3,"file":"library.4e4b0183.js.map"}